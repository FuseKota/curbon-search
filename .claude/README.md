# .claude ディレクトリ

このディレクトリには、Claude Codeの新しいセッションへの引き継ぎに必要な情報が含まれています。

## 📁 ファイル構成

### 1. PROJECT_CONTEXT.md
**プロジェクト全体のコンテキスト情報**

内容:
- プロジェクト概要と2つの運用モード
- 主要ファイル構成とソースリスト
- よく使うコマンド
- 環境変数設定
- トラブルシューティング

**こんな時に参照**:
- 新しいセッションを開始した時
- プロジェクトの全体像を思い出したい時
- どのコマンドを使うべきか迷った時

---

### 2. COMMANDS.md
**コマンドのクイックリファレンス**

内容:
- モード別のコマンド例
- テストコマンド
- デバッグコマンド
- JSON出力の確認方法
- 実用的なスクリプト例

**こんな時に参照**:
- 具体的なコマンドを忘れた時
- デバッグ方法を知りたい時
- JSONの確認方法を調べたい時

---

### 3. settings.local.json
**Claude Code のローカル設定**

自動生成されるファイル。手動編集は通常不要。

---

## 🚀 クイックスタート

新しいClaude Codeセッションを開始したら：

1. **PROJECT_CONTEXT.md**を読む
   - プロジェクトの2つのモードを理解
   - 主要ファイルの場所を確認

2. **CLAUDE.md**（プロジェクトルート）を確認
   - プロジェクト固有の重要な指示
   - やってはいけないこと

3. **COMMANDS.md**を参照
   - 必要なコマンドをコピー＆実行

---

## 📚 その他の重要ドキュメント

プロジェクトルートにある以下のファイルも参照：

- **CLAUDE.md** - Claude Code向けプロジェクト固有指示
- **docs/architecture/COMPLETE_IMPLEMENTATION_GUIDE.md** - 完全実装ガイド（2,756行）
- **README.md** - プロジェクト概要
- **docs/architecture/PROJECT_COMPREHENSIVE_REPORT.md** - プロジェクト分析レポート
- **docs/README.md** - ドキュメント目次とナビゲーション
- **scripts/README.md** - スクリプト一覧と使い方

---

## 💡 使い方のヒント

### パターン1: 特定のソースでエラーが出た
```bash
# 1. COMMANDS.mdの「デバッグコマンド」セクションを参照
# 2. 該当ソースを単独でテスト
DEBUG_SCRAPING=1 ./pipeline -sources={問題のソース} -perSource=1 -queriesPerHeadline=0

# 3. PROJECT_CONTEXT.mdの「トラブルシューティング」を確認
```

### パターン2: 新しい機能を追加したい
```bash
# 1. CLAUDE.mdの「よくあるタスクのフロー」を確認
# 2. docs/architecture/COMPLETE_IMPLEMENTATION_GUIDE.mdの該当セクションを詳細に読む
# 3. 既存の実装パターンを参考にする
```

### パターン3: コマンドを忘れた
```bash
# COMMANDS.mdをざっと眺めて該当コマンドを探す
# または、PROJECT_CONTEXT.mdの「よく使うコマンド」セクション
```

---

## 🔄 このディレクトリの更新

このディレクトリのファイルは、プロジェクトの大きな変更があった時に更新してください：

- 新しいソースを追加した時
- 新しい運用モードを追加した時
- よく使うコマンドが変わった時
- 重要なトラブルシューティング情報が見つかった時

---

**最終更新**: 2026年1月31日（ディレクトリ構造改善に伴う更新）

---

## 🎯 自動化機能（2026年1月31日追加）

このプロジェクトには、Claude Codeが自動的にサポートする機能が組み込まれています：

### Hooks（自動保護）
- `.env`ファイルの誤編集を防止
- Go自動フォーマット（編集後）
- セッション開始時のコンテキスト再注入
- 初回プロンプト時の2モードリマインダー

### Skills（タスクパターン）
- `/test-source <name>` - ソースのテスト
- `/verify-mode <task>` - モード確認
- `/commit-pattern <desc>` - コミットメッセージ生成
- `/add-source <url>` - 新しいソースの追加ガイド

### Commands（クイックアクセス）
- `/build` - パイプラインのビルド
- `/test-all` - 全ソースのクイックテスト
- `/check-env` - 環境変数の確認

これらの機能は、GitHubからcloneした直後から自動的に利用可能です。

---

## 📁 ディレクトリ構造の改善（2026年1月31日）

プロジェクトのディレクトリ構造が整理されました：

- **docs/** - すべてのMarkdownドキュメント
  - guides/ - 使い方ガイド
  - reports/ - テストレポート
  - architecture/ - 実装詳細
- **scripts/** - すべてのシェルスクリプト

詳細は `docs/README.md` と `scripts/README.md` を参照してください。
